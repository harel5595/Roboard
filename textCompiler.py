from math import pi

lines = dict()

lines[' '] = [('L', (0, 0), (0.5, 0), False)]

lines['A'] = [('L', (0, 0), (0.25, 1), True),
              ('L', (0.25, 1), (0.5, 0), True),
              ('L', (0.25, 1), (0.125, 0.5), False),
              ('L', (0.125, 0.5), (0.375, 0.5), True),
              ('L', (0.375, 0.5), (0.5, 0), False)]

lines['B'] = [('C', (0, 0.333), 0.333, -0.5 * pi, pi),
              ('C', (0, 0.833), 0.167, -0.5 * pi, pi),
              ('L', (0, 1), (0, 0), True),
              ('L', (0, 0), (0.5, 0), False)]

lines['C'] = [('L', (0, 0), (0.25, 1), False),
              ('C', (0.25, 0.5), 0.5, 0.5 * pi, pi),
              ('L', (0.25, 0), (0.5, 0), False)]

lines['D'] = [('L', (0, 0), (0, 1), True),
              ('L', (0, 1), (0, 0), False),
              ('C', (0, 0.5), 0.5, -0.5 * pi, pi),
              ('L', (0, 1), (0.5, 0), False)]

lines['E'] = [('L', (0, 0), (0, 1), True),
              ('L', (0, 1), (0.5, 1), True),
              ('L', (0.5, 1), (0, 0.5), False),
              ('L', (0, 0.5), (0.5, 0.5), True),
              ('L', (0.5, 0.5), (0, 0), False),
              ('L', (0, 0), (0.5, 0), True)]

lines['F'] = [('L', (0, 0), (0, 1), True),
              ('L', (0, 1), (0.5, 1), True),
              ('L', (0.5, 1), (0, 0.5), False),
              ('L', (0, 0.5), (0.5, 0.5), True),
              ('L', (0.5, 0.5), (0.5, 0), False)]

lines['G'] = [('L', (0, 0), (0.25, 1), False),
              ('C', (0.25, 0.5), 0.5, 0.5 * pi, pi),
              ('L', (0.25, 0), (0.5, 0.5), True),
              ('L', (0.5, 0.5), (0.25, 0.5), True),
              ('L', (0.25, 0.5), (0.5, 0), False)]

lines['H'] = [('L', (0, 0), (0, 1), True),
              ('L', (0, 1), (0, 0.5), False),
              ('L', (0, 0.5), (0.5, 0.5), True),
              ('L', (0.5, 0.5), (0.5, 1), False),
              ('L', (0.5, 1), (0.5, 0), True)]

lines['I'] = [('L', (0, 0), (0, 1), False),
              ('L', (0, 1), (0.5, 1), True),
              ('L', (0.5, 1), (0.25, 1), False),
              ('L', (0.25, 1), (0.25, 0), True),
              ('L', (0.25, 0), (0, 0), False),
              ('L', (0, 0), (0.5, 0), True)]

lines['J'] = [('L', (0, 0), (0, 1), False),
              ('L', (0, 1), (0.5, 1), True),
              ('L', (0.5, 1), (0.25, 1), False),
              ('L', (0.25, 1), (0.25, 0.5), True),
              ('L', (0.25, 0.5), (0.25, 0.5), False),
              ('C', (0.125, 0.25), 0.25, pi, 2 * pi),
              ('L', (0.25, 0.5), (0.5, 0), True)]

lines['K'] = [('L', (0, 0), (0, 1), True),
              ('L', (0, 1), (0, 0.5), False),
              ('L', (0, 0.5), (0.5, 1), True),
              ('L', (0.5, 1), (0, 0.5), False),
              ('L', (0, 0.5), (0.5, 0), True)]

lines['L'] = [('L', (0, 0), (0, 1), True),
              ('L', (0, 1), (0, 0), False),
              ('L', (0, 0), (0.5, 0), True)]

lines['M'] = [('L', (0, 0), (0, 1), True),
              ('L', (0, 1), (0.25, 0.5), True),
              ('L', (0.25, 0.5), (0.5, 1), True),
              ('L', (0.5, 1), (0.5, 0), True)]

lines['N'] = [('L', (0, 0), (0, 1), True),
              ('L', (0, 1), (0.5, 0), True),
              ('L', (0.5, 0), (0.5, 1), True),
              ('L', (0.5, 1), (0.5, 0), False)]

lines['O'] = [('L', (0, 0), (0.5, 0.25), False),
              ('C', (0.25, 0.25), 0.25, 0, 2 * pi),
              ('L', (0.5, 0.25), (0.5, 0), False)]

lines['P'] = [('L', (0, 0), (0, 1), True),
              ('L', (0, 1), (0, 0.5), False),
              ('C', (0, 0.75), 0.25, -0.5 * pi, pi),
              ('L', (0, 1), (0.167, 0.666), False),
              ('L', (0, 0.666), (0.33, 0), False),
              ('L', (0.33, 0), (0.5, 0), False)]

lines['Q'] = [('L', (0, 0), (0.5, 0.25), False),
              ('C', (0.25, 0.25), 0.25, 0, 2 * pi),
              ('L', (0.5, 0.25), (0.25, 0.25), False),
              ('L', (0.25, 0.25), (0.5, 0), True)]

lines['R'] = [('L', (0, 0), (0, 1), True),
              ('L', (0, 1), (0, 0.5), False),
              ('C', (0, 0.75), 0.25, -0.5 * pi, pi),
              ('L', (0, 1), (0.167, 0.666), False),
              ('L', (0, 0.666), (0.33, 0), True),
              ('L', (0.33, 0), (0.5, 0), False)]

# this works, don't touch, was measured in geogebra
lines['S'] = [('L', (0, 0), (0.43, 0.91), False),
              ('C', (0.25, 0.75), 0.25, 0.2304 * pi, 1.5 * pi),
              ('L', (0.25, 0.5), (0.0364, 0.1200), False),
              ('C', (0.25, 0.25), 0.25, 1.174 * pi, 2.5 * pi),
              ('L', (0.25, 0.5), (0.5, 0), False)]

lines['T'] = [('L', (0, 0), (0, 1), False),
              ('L', (0, 1), (0.5, 1), True),
              ('L', (0.5, 1), (0.25, 1), False),
              ('L', (0.25, 1), (0.25, 0), True),
              ('L', (0.25, 0), (0.5, 0), False)]

lines['U'] = [('L', (0, 0), (0, 1), False),
              ('L', (0, 1), (0, 0.25), True),
              ('C', (0.25, 0.25), 0.25, pi, 2 * pi),
              ('L', (0.5, 0.25), (0.5, 1), True),
              ('L', (0.5, 1), (0.5, 0), False)]

lines['V'] = [('L', (0, 0), (0, 1), False),
              ('L', (0, 1), (0.25, 0), True),
              ('L', (0.25, 0), (0.5, 1), True),
              ('L', (0.5, 1), (0.5, 0), False)]

lines['W'] = [('L', (0, 0), (0, 1), False),
              ('L', (0, 1), (0.167, 0), True),
              ('L', (0.167, 0), (0.25, 0.5), True),
              ('L', (0.25, 0.5), (0.333, 0), True),
              ('L', (0.333, 0), (0.5, 1), True),
              ('L', (0.5, 1), (0.5, 0), False)]

lines['X'] = [('L', (0, 0), (0, 1), False),
              ('L', (0, 1), (0.5, 0), True),
              ('L', (0.5, 0), (0.5, 1), False),
              ('L', (0.5, 1), (0, 0), True),
              ('L', (0, 0), (0.5, 0), False)]

lines['Y'] = [('L', (0, 0), (0, 1), False),
              ('L', (0, 1), (0.25, 0.5), True),
              ('L', (0.25, 0.5), (0.5, 1), True),
              ('L', (0.5, 1), (0.25, 0.5), False),
              ('L', (0.25, 0.5), (0.25, 0), True),
              ('L', (0.25, 0), (0.5, 0), False)]

lines['Z'] = [('L', (0, 0), (0, 1), False),
              ('L', (0, 1), (0.5, 1), True),
              ('L', (0.5, 1), (0, 0), True),
              ('L', (0, 0), (0.5, 0), True)]

lines['!'] = [('L', (0, 0), (0.25, 1), False),
              ('L', (0.25, 1), (0.25, 0.3), True),
              ('L', (0.25, 0.3), (0.3, 0.15), False),
              ('C', (0.25, 0.15), 0.05, 0, 2 * pi),
              ('L', (0.3, 0.15), (0.5, 0), False)]


def compileWord(string, height, X, Y, path):
    with open(path, "w") as myFile:
        myFile.write(f"L:{X}:{Y}:{X}:{Y}:F:\n")  # brings robot to start
        for c in string:
            for line in lines[c]:
                if line[0] == "L":  # draws line
                    myFile.write(
                        f"L:{round(X + line[1][0] * height,4)}:{round(Y + line[1][1] * height,4)}:{round(X + line[2][0] * height,4)}:{round(Y + line[2][1] * height,4)}:{'T' if line[3] else 'F'}:\n")
                elif line[0] == "C":  # draws circle
                    myFile.write(
                        f"C:{round(X + line[1][0] * height,4)}:{round(Y + line[1][1] * height,4)}:{round(line[2] * height,4)}:{line[3]}:{line[4]}:\n")
            X += 0.5 * height  # adds kerning
            myFile.write(f"L:{round(X,4)}:{round(Y,4)}:{round(X + 0.1 * height,4)}:{round(Y,4)}:F:\n")
            X += 0.1 * height


if __name__ == '__main__':
    compileWord("QUESTION", 0.08, 0.80, 0.15, "Hello2.txt")
    compileWord("MARK!", 0.08, 0.85, 0.05, "World2.txt")
